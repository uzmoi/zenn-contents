---
title: "Vitestã§å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å†…éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’mockã™ã‚‹"
emoji: "ğŸ”€"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["test", "vitest", "mock"]
published: true
---

ä½•ã‚‰ã‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å†…éƒ¨ã«ä»‹å…¥ã—ãŸã„ã“ã¨ãŒã‚ã‚‹ã€‚
`vi.spyOn`ãªã©ãŒä½¿ãˆãªãã¦ã€å‡¦ç†ãŒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«åˆ†ã‹ã‚Œã¦ã„ã‚‹å ´åˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒ¢ãƒƒã‚¯ã—ã‚ˆã†ã¨ã™ã‚‹ã ã‚ã†ã€‚
ã—ã‹ã—ã€viteã®å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’äº‹å‰ãƒãƒ³ãƒ‰ãƒ«ã™ã‚‹æ€§è³ªã«ã‚ˆã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ¢ãƒƒã‚¯ã‚’ã—ã‚ˆã†ã¨ã—ã¦ã‚‚ä½•ã‚‚èµ·ããªã„ã€‚

```ts:hoge.test.ts
vi.mock("hogehoge-lib/dist/internal/hoge.js", () => ({
  hoge: vi.fn(),
}));
```

ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–ã™ã‚‹ã“ã¨ã§ãƒ¢ãƒƒã‚¯ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚

```ts:vitest.config.ts
import { defineConfig } from "vitest/config";

export default defineConfig({
  test: {
    server: {
      deps: {
        inline: ["hogehoge-lib"],
      },
    },
  },
});
```

ãŠã—ã¾ã„ã€‚
